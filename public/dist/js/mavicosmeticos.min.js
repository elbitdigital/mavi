/*!
 * Elbit Mavi Cosm√©ticos Project v0.0.0 (http://elbit.com.br/)
 * Copyright 2013-2016 Elbit Developers
 * Licensed under MIT (https://github.com/elbitdigital/base/blob/master/LICENSE)
*/
var formSentCount=0,formSentCountLimit=2,requestURL="http://service.elbit.com.br/venus/api/",formLocked=!1,form={viewport:document.getElementById("cForm")};form.fields={},form.sendButton={},form.fields.cName=document.getElementById("cName"),form.fields.cPhone=document.getElementById("cPhone"),form.fields.cEmail=document.getElementById("cEmail"),form.fields.cMessage=document.getElementById("cMessage"),form.sendButton.viewport=document.getElementById("cSubmit"),form.states=["is-error","is-fail","is-incomplete","is-sending","is-success"],form.changeState=function(e,t){if(form.viewport){for(var i=form.states.length;i--;)form.viewport.classList.remove(form.states[i]);form.viewport.classList.add(e),t&&(document.querySelector("span.ContactFormStatus-text--incomplete").innerText=t)}},form.sendRequest=function(e){if(e){var t=new XMLHttpRequest;formLocked=!0,form.changeState("is-sending",!1),t.ontimeout=function(e){console.log(e),form.changeState("is-fail",!1)},t.onerror=function(){form.changeState("is-error",!1)},t.onreadystatechange=function(e){4==t.readyState&&(200==t.status?(console.log(t.responseText),form.changeState("is-success",!1)):form.changeState("is-error",!1)),formLocked=!1},t.withCredentials=!0,t.open("GET",requestURL+"?"+form.requestParams(e),!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.timeout=12e3,t.send(null)}},form.requestParams=function(e){var t="",i=encodeURIComponent;for(var o in e)t+="&"+i(o)+"="+i(e[o]);return t.slice(1)+"&_t="+(new Date).getTime()},form.send=function(e,t){e&&(t?setTimeout(function(){form.sendRequest(e)},t):form.sendRequest(e))},form.sendButton.viewport.addEventListener("click",function(e){if(e.preventDefault(),!formLocked&&formSentCount<formSentCountLimit){var t=!(!form.fields.cName.value||!form.fields.cEmail.value&&!form.fields.cPhone.value||!form.fields.cMessage.value);if(t){formLocked=!0,formSentCount++;var i={cName:form.fields.cName.value,cPhone:form.fields.cPhone.value,cEmail:form.fields.cEmail.value,cAddress:"",cCity:"",cMessage:form.fields.cMessage.value};form.send(i,!1)}else{form.changeState("error",!1);for(var o=0;o<requiredFields.length;o++)requiredFields[o].requiredField.isRequiredOne&&""==requiredFields[o].requiredField.input.viewport.value&&form.changeState("is-incomplete","Informe pelo menos um email ou um telefone")}}});var RequiredField=function(){function e(e,t){var i=this;this.viewport=e,this.input={},this.fieldClass=t,this.onClick=function(){try{i.input.viewport.focus()}catch(e){}},this.onFocus=function(){i.viewport.classList.add("has-focus"),i.input.viewport.value&&i.viewport.classList.remove("is-empty")},this.onBlur=function(){i.viewport.classList.remove("has-focus"),i.input.viewport.value?i.viewport.classList.remove("is-empty"):i.viewport.classList.add("is-empty")},this.onInput=function(){i.input.viewport.value?(i.viewport.classList.remove("is-empty"),i.viewport.classList.add("has-label"),i.viewport.classList.add("is-valid")):(i.viewport.classList.remove("has-label"),i.viewport.classList.remove("is-valid"))},this.viewport&&this.init()}return e.prototype.normalize=function(){this.input.viewport.value&&this.viewport.classList.add("has-label")},e.prototype.addListeners=function(){try{this.viewport.addEventListener("click",this.onClick,!1),this.input.viewport.addEventListener("focus",this.onFocus,!1),this.input.viewport.addEventListener("blur",this.onBlur,!1),this.input.viewport.addEventListener("input",this.onInput,!1)}catch(e){}},e.prototype.getInputElement=function(){return this.input.viewport=this.viewport.querySelector(this.fieldClass),!!this.input.viewport},e.prototype.init=function(){this.getInputElement()&&this.addListeners(),this.normalize()},e}();